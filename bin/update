#!/bin/bash

all=(dot config-files)

update-repo() {
    repo="$1"
    echo "Updating ${repo}..."
    cd "$HOME/Projects/Git/$repo" && git pull && source "$HOME/.bashrc"
    if [[ $repo != ${all[${#all[@]}-1]} ]]; then echo; fi
}


if [[ $# == 0 ]]; then
    echo "Usage: update REPO ..."
    exit 1
fi

args=($@)
after=(${args[@]#-a})
if [[ ${#args[@]} != ${#after[@]} ]]; then
    for repo in "${all[@]}"; do
        update-repo $repo
    done
    exit
fi

while [[ $# > 0 ]]; do
    repo="$1"
    case $repo in
        dot) update-repo "$repo" ;;
        *) echo "Unrecognized repo: $repo" ;;
    esac
    shift
done
