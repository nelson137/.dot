#!/bin/bash
# Get internal and external ip addresses



getip() {
    # Ignore all stderr output
    exec 2>/dev/null

    local int="$(
        ip route get 1 |
        grep -oE '192\.168(\.[0-9]{1,3}){2}' |
        grep -v '^192\.168\.1\.1$'
    )"

    local ext
    if which dig >/dev/null; then
        ext="$(dig +short myip.opendns.com @resolver1.opendns.com)"
    else
        ext="$(curl -s http://icanhazip.com)"
    fi

    echo "Internal: $int"
    echo "External: $ext"
}



getip "$@"
